create database filesystem;

use filesystem;

create table user( 
uid int primary key auto_increment,
uname varchar(30) ,
uemail varchar(30) ,
upwd varchar(128) ,
state int default 0,
uupdatetime varchar(23) ,
code varchar(50) NOT NULL,
ucompany varchar(30),
state int
);


create table workPlace (
wid int primary key auto_increment,
wname varchar(30) NOT NULL
);

 insert into workPlace(wname) values("一号楼");
 insert into workPlace(wname) values("二号楼"); 


create table classify(
cyid int primary key auto_increment,
cyname varchar(30) NOT NULL,
cyfather int ,
cyaddress varchar(50) 
);

create table getFile(
gfid int primary key auto_increment,
gfname varchar(50) NOT NULL,
gfidea text,
gfloader text,
gfcompany varchar(50),
gfresult varchar(20),
gfclassifyid int ,
gfclassifyname varchar(100),
gfaddress varchar(50) ,
gfdatetime timestamp,
gfnumber int not null,
gfcountuse int default 1,
foreign key(gfclassifyid) references classify(cyid)
);

create table companyFile (
cfid int primary key auto_increment,
cfname varchar(50) ,
cfdate timestamp ,
cfaccept varchar(30),
cfeditor varchar(50),
cfsend varchar(20) ,
cflevel varchar(15),
cfloader text,
cfnumber int,
cffontid varchar(32),
cflanguage varchar(30),
cfaddress varchar(100),
cfclassifyid int ,
cfclassifyname varchar(100),
foreign key(cfclassifyid) references classify(cyid)
);


create table role(
rid int primary key auto_increment,
rname varchar(30) ,
rdescribe varchar(100)
);

insert into role(rname,rdescribe) values("admin","超级用户的角色");
insert into role(rname,rdescribe) values("user","普通用户的角色");

create table permission(
pid int primary key auto_increment,
pname varchar(30),
pdescribe varchar(100)
);

insert into permission(pname,pdescribe) values("companyFile:select","对单位制发文件的查询权限");
insert into permission(pname,pdescribe) values("companyFile:update","对单位制发文件的更新权限");
insert into permission(pname,pdescribe) values("companyFile:delete","对单位制发文件的删除权限");
insert into permission(pname,pdescribe) values("companyFile:insert","对单位制发文件的录入权限");
insert into permission(pname,pdescribe) values("getFile:select","对收到文件的查询权限");
insert into permission(pname,pdescribe) values("getFile:update","对收到文件的修改权限");
insert into permission(pname,pdescribe) values("getFile:delete","对收到文件的删除权限");
insert into permission(pname,pdescribe) values("getFile:insert","对收到文件的录入权限");
insert into permission(pname,pdescribe) values("user:insert","对用户的录入权限");
insert into permission(pname,pdescribe) values("user:delete","对用户的删除权限");
insert into permission(pname,pdescribe) values("user:update","对用户的更新权限");
insert into permission(pname,pdescribe) values("user:select","对用户的查询权限");


create table user_roles (
uid int ,
rid int ,
primary key(uid,rid)
);

insert into role_permission(rid,pid) values(1,1);

create table role_permission (
rid int,
pid int,
primary key(rid,pid)
);

insert into role_permission(rid,pid) values(1,1);
insert into role_permission(rid,pid) values(1,2);
insert into role_permission(rid,pid) values(1,3);
insert into role_permission(rid,pid) values(1,4);
insert into role_permission(rid,pid) values(1,5);
insert into role_permission(rid,pid) values(1,6);
insert into role_permission(rid,pid) values(1,7);
insert into role_permission(rid,pid) values(1,8);
insert into role_permission(rid,pid) values(1,9);
insert into role_permission(rid,pid) values(1,10);
insert into role_permission(rid,pid) values(1,11);
insert into role_permission(rid,pid) values(1,12);

insert into role_permission(rid,pid) values(2,1);
insert into role_permission(rid,pid) values(2,2);
insert into role_permission(rid,pid) values(2,3);
insert into role_permission(rid,pid) values(2,4);
insert into role_permission(rid,pid) values(2,5);
insert into role_permission(rid,pid) values(2,6);
insert into role_permission(rid,pid) values(2,7);
insert into role_permission(rid,pid) values(2,8);
