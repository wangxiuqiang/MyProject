<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.fm.user.dao.UserCompanyFileMapper">

    <sql id="Base_Columns_List">
        cfid,cfname,cfclassifyid,cfclassifyname,cfaddress,cfdate,cfeditor,cfaccept,
        cfsend,cflevel,cffontid,cfnumber,cflanguage ,cfloader,type,isborrow
    </sql>

    <insert id="insertCompanyFile" parameterType="cn.fm.pojo.CompanyFile" >
        insert into companyFile(cfname,cfclassifyid,cfclassifyname,cfaddress,cfdate,cfeditor,cfaccept,
        cfsend,cflevel,cffontid,cfnumber,cflanguage) values(#{cfname},
        #{cfclassifyid} ,#{cfclassifyname},#{cfaddress},#{cfdate},#{cfeditor},#{cfaccept},
        #{cfsend},#{cflevel},#{cffontid},#{cfnumber},#{cflanguage});
    </insert>

    <select id="selectClassify" parameterType="java.lang.Integer" resultType="cn.fm.pojo.Classify">
        select cyid,cyname,cyfather,cyaddress from classify where cyid =#{value};
    </select>

    <select id="selectCompanyFileById" parameterType="int" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cfid = #{cfid}
    </select>

    <select id="selectCompanyFileByName" parameterType="java.lang.String" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cfname like concat(concat('%',#{value}), '%')
    </select>


    <select id="selectCompanyFileByClassifyId" parameterType="java.lang.Integer" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cfclassifyid = #{value}
    </select>


    <select id="selectCompanyFileByDateTime" parameterType="java.lang.String" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cfdate like concat(concat('%',#{value}), '%')
    </select>

    <select id="selectCompanyFileByFontid" parameterType="java.lang.String" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cffontid = #{value}
    </select>

    <select id="selectCompanyFileByLanguage" parameterType="java.lang.String" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile where cflanguage = #{value}
    </select>
    <!--


   -->
    <select id="selectAllCompanyFile" resultType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile ;
    </select>

    <!--修改文件信息-->
    <update id="updateCompanyFileById" parameterType="cn.fm.pojo.CompanyFile">
        update companyFile
        <set>
        <if test="cfname != null">
            cfname = #{cfname} ,
        </if>
        <if test="cfdate != null" >
            cfdate = #{cfdate} ,
        </if>
        <if test="cfeditor != null" >
            cfeditor = #{cfeditor} ,
        </if>
        <if test="cfaccept != null" >
            cfaccept = #{cfaccept} ,
        </if>
        <if test="cfsend != null" >
            cfsend = #{cfsend},
        </if>
        <if test="cflevel != null" >
            cflevel = #{cflevel},
        </if>
        <if test="cfloader != null" >
            cfloader = #{cfloader},
        </if>
        <if test="cfnumber != 0" >
            cfnumber = #{cfnumber},
        </if>
        <if test="cffontid != null">
            cffontid = #{cffontid},
        </if>
        <if test="cflanguage != null">
            cflanguage = #{cflanguage},
        </if>
        <if test="cfclassifyid != 0" >
            cfclassifyid = #{cfclassifyid},
        </if>
        <if test="cfclassifyname != null">
            cfclassifyname = #{cfclassifyname} ,
        </if>
        <if test="cfaddress != null">
            cfaddress = #{cfaddress}
        </if>
        </set>
        where cfid  = #{cfid}
    </update>

    <select id="selectCompanyFileByTwoOrMore" resultType="cn.fm.pojo.CompanyFile" parameterType="cn.fm.pojo.CompanyFile">
        select
        <include refid="Base_Columns_List" />
        from companyFile
        <where>
            <if test="cffontid != null">
                cffontid=#{cffontid}
            </if>
            <if test="cflanguage != null" >
              and  cflanguage = #{cflanguage}
            </if>
            <if test="cfname != null">
                AND  cfname like concat(concat('%',#{cfname}), '%')
            </if>
            <if test="cfclassifyid != 0" >
               AND cfclassifyid = #{cfclassifyid}
            </if>
            <if test="cfdate != null">
                AND cfdate like concat(concat('%',#{cfdate}), '%')
            </if>
        </where>
    </select>

    <!--删除文件信息-->
    <delete id="deleteCompanyFileById" parameterType="int">
        delete from companyFile where cfid = #{cfid};
    </delete>
</mapper>